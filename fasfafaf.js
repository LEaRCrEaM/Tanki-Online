var Skins = {
        hornet: {
            or: {
                meta: "/566/70102/323/346/31033607367072/meta.info",
                lightmap: "/566/70102/323/346/31033607367072/lightmap.webp",
                object: "/566/70102/323/346/31033607367072/object.a3d"
            },
            pr: {
                meta: "/553/1466/317/276/31033607413764/meta.info",
                lightmap: "/553/1466/317/276/31033607413764/lightmap.webp",
                object: "/553/1466/317/276/31033607413764/object.a3d"
            },
            lc: {
                meta: "/551/32007/310/225/31033607400400/meta.info",
                lightmap: "/551/32007/310/225/31033607400400/lightmap.webp",
                object: "/551/32007/310/225/31033607400400/object.a3d"
            },
            ut: {
                meta: "/562/165115/303/236/31033610210055/meta.info",
                lightmap: "/562/165115/303/236/31033610210055/lightmap.webp",
                object: "/562/165115/303/236/31033610210055/object.a3d"
            },
            xt: {
                meta: "/0/16722/6/305/31033607424605/meta.info",
                lightmap: "/0/16722/6/305/31033607424605/lightmap.webp",
                object: "/0/16722/6/305/31033607424605/object.a3d"
            }
        },
        wasp: {
            or: {
                meta: "/574/111243/33/322/31033607311775/meta.info",
                lightmap: "/574/111243/33/322/31033607311775/lightmap.webp",
                object: "/574/111243/33/322/31033607311775/object.a3d"
            },
            lc: {
                meta: "/577/171773/42/62/31033610115062/meta.info",
                lightmap: "/577/171773/42/62/31033610115062/lightmap.webp",
                object: "/577/171773/42/62/31033610115062/object.a3d"
            },
            xt: {
                meta: "/0/16722/167/77/31033610130736/meta.info",
                lightmap: "/0/16722/167/77/31033610130736/lightmap.webp",
                object: "/0/16722/167/77/31033610130736/object.a3d"
            }
        },
        railgun: {
            or: {
                meta: "/567/105205/202/122/31033604741475/meta.info",
                lightmap: "/567/105205/202/122/31033604741475/lightmap.webp",
                object: "/567/105205/202/122/31033604741475/object.a3d"
            },
            pr: {
                meta: "/553/116715/27/132/31033604752652/meta.info",
                lightmap: "/553/116715/27/132/31033604752652/lightmap.webp",
                object: "/553/116715/27/132/31033604752652/object.a3d"
            },
            lc: {
                meta: "/550/121443/145/146/31033604745456/meta.info",
                lightmap: "/550/121443/145/146/31033604745456/lightmap.webp",
                object: "/550/121443/145/146/31033604745456/object.a3d"
            },
            ut: {
                meta: "/556/177362/212/346/31033604754562/meta.info",
                lightmap: "/556/177362/212/346/31033604754562/lightmap.webp",
                object: "/556/177362/212/346/31033604754562/object.a3d"
            },
            gt: {
                meta: "/606/155010/245/142/31033604735353/meta.info",
                lightmap: "/606/155010/245/142/31033604735353/lightmap.webp",
                object: "/606/155010/245/142/31033604735353/object.a3d"
            },
            xt: {
                meta: "/0/16722/6/301/31033604764033/meta.info",
                lightmap: "/0/16722/6/301/31033604764033/lightmap.webp",
                object: "/0/16722/6/301/31033604764033/object.a3d"
            }
        }
    };
    if (navigator.platform.toLowerCase().includes('mac')) {
        Skins = {
            hornet: {
                or: {
                    meta: "/566/70102/323/346/31033607367072/meta.info",
                    lightmap: "/566/70102/323/346/31033607367072/lightmap-astc.ktx",
                    object: "/566/70102/323/346/31033607367072/object.a3d"
                },
                pr: {
                    meta: "/553/1466/317/276/31033607413764/meta.info",
                    lightmap: "/553/1466/317/276/31033607413764/lightmap-astc.ktx",
                    object: "/553/1466/317/276/31033607413764/object.a3d"
                },
                lc: {
                    meta: "/551/32007/310/225/31033607400400/meta.info",
                    lightmap: "/551/32007/310/225/31033607400400/lightmap-astc.ktx",
                    object: "/551/32007/310/225/31033607400400/object.a3d"
                },
                ut: {
                    meta: "/562/165115/303/236/31033610210055/meta.info",
                    lightmap: "/562/165115/303/236/31033610210055/lightmap-astc.ktx",
                    object: "/562/165115/303/236/31033610210055/object.a3d"
                },
                gt: {
                    meta: "/605/27506/77/216/31033607347661/meta.info",
                    lightmap: "/605/27506/77/216/31033607347661/lightmap-astc.ktx",
                    object: "/605/27506/77/216/31033607347661/object.a3d",
                    wheels: "/605/27506/77/216/31033607347661/wheels.webp"
                },
                xt: {
                    meta: "/0/16722/6/305/31033607424605/meta.info",
                    lightmap: "/0/16722/6/305/31033607424605/lightmap-astc.ktx",
                    object: "/0/16722/6/305/31033607424605/object.a3d"
                }
            },
            wasp: {
                or: {
                    meta: "/574/111243/33/322/31033607311775/meta.info",
                    lightmap: "/574/111243/33/322/31033607311775/lightmap-astc.ktx",
                    object: "/574/111243/33/322/31033607311775/object.a3d"
                },
                lc: {
                    meta: "/577/171773/42/62/31033610115062/meta.info",
                    lightmap: "/577/171773/42/62/31033610115062/lightmap-astc.ktx",
                    object: "/577/171773/42/62/31033610115062/object.a3d"
                },
                xt: {
                    meta: "/0/16722/167/77/31033610130736/meta.info",
                    lightmap: "/0/16722/167/77/31033610130736/lightmap-astc.ktx",
                    object: "/0/16722/167/77/31033610130736/object.a3d"
                }
            },
            railgun: {
                or: {
                    meta: "/567/105205/202/122/31033604741475/meta.info",
                    lightmap: "/567/105205/202/122/31033604741475/lightmap-astc.ktx",
                    object: "/567/105205/202/122/31033604741475/object.a3d"
                },
                pr: {
                    meta: "/553/116715/27/132/31033604752652/meta.info",
                    lightmap: "/553/116715/27/132/31033604752652/lightmap-astc.ktx",
                    object: "/553/116715/27/132/31033604752652/object.a3d"
                },
                lc: {
                    meta: "/550/121443/145/146/31033604745456/meta.info",
                    lightmap: "/550/121443/145/146/31033604745456/lightmap-astc.ktx",
                    object: "/550/121443/145/146/31033604745456/object.a3d"
                },
                ut: {
                    meta: "/556/177362/212/346/31033604754562/meta.info",
                    lightmap: "/556/177362/212/346/31033604754562/lightmap-astc.ktx",
                    object: "/556/177362/212/346/31033604754562/object.a3d"
                },
                gt: {
                    meta: "/606/155010/245/142/31033604735353/meta.info",
                    lightmap: "/606/155010/245/142/31033604735353/lightmap-astc.ktx",
                    object: "/606/155010/245/142/31033604735353/object.a3d"
                },
                xt: {
                    meta: "/0/16722/6/301/31033604764033/meta.info",
                    lightmap: "/0/16722/6/301/31033604764033/lightmap-astc.ktx",
                    object: "/0/16722/6/301/31033604764033/object.a3d"
                }
            }
        };
    };
    var SelectedTank = {
        turret: {},
        hull: {}
    };
    document.body.insertAdjacentHTML('beforeend', `
<div class='gui3' style="left:150px">
    <h1 style="text-align:center">Skins</h1>
    <label for="Turret"></label>
    <select name="Turret" id="Turret">
    </select>
    <label for="Hull"></label>
    <select name="Hull" id="Hull">
    </select>
</div>
<div class='gui2'>
    <div class="speed-checkbox">
        <div class='info'>(XP XT's) Saves choice on refresh and must be on before joining/refreshing (CLIENT-SIDED ONLY YOU CAN SEE XT)</div>
        <input id='skin-check' class='hotkey' type='checkbox'>
        <label for='skin-check' class="slider"></label>
        <label for='skin-check'>XP XT's</label>
    </div>
</div>

<style>
    /* Info Tooltip */
.info {
    position: absolute;
    z-index: 1;
    top: -400%;
    background: rgba(255, 2, 2, 0.7);
    border-radius: 20px;
    width: 200px;
    padding: 10px;
    opacity: 0;
    transform: translateY(-10px);
    transition: opacity 0.3s ease, transform 0.3s ease;
    pointer-events: none;
}

.speed-checkbox:hover .info {
    opacity: 1;
    transform: translateY(0);
    pointer-events: all;
}

/* Animated GUIs */
@keyframes fadeInScale {
    0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8);
    }
    100% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }
}

.gui2, .gui3 {
    width: 300px;
    border-radius: 20px;
    border: 2px solid #fff;
    padding: 20px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(12px);
    box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.4);
    animation: fadeInScale 0.5s ease-out;
    z-index: 9999999999;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

/* Enhanced Switch Styling */
.speed-checkbox {
    display: flex;
    align-items: center;
}

.speed-checkbox input[type='checkbox'] {
    display: none;
}

.speed-checkbox .slider {
    position: relative;
    width: 50px;
    height: 24px;
    background-color: #ccc;
    border-radius: 50px;
    cursor: pointer;
    transition: background-color 0.4s ease;
}

.speed-checkbox .slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 2px;
    bottom: 2px;
    background-color: #fff;
    border-radius: 50%;
    transition: 0.4s;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

input[type='checkbox']:checked + .slider {
    background-color: #4caf50;
}

input[type='checkbox']:checked + .slider:before {
    transform: translateX(26px);
}

/* Enhanced Label Styling */
.speed-checkbox label {
    margin-left: 15px;
    color: #fff;
    font-family: 'Roboto', sans-serif;
    font-size: 16px;
    letter-spacing: 0.5px;
}

/* Slider Controls */
.slider-controls {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.slider-controls label {
    color: #fff;
    font-family: 'Roboto', sans-serif;
    font-size: 16px;
}

.slider-controls input[type='range'] {
    width: 100%;
    -webkit-appearance: none;
    height: 8px;
    border-radius: 20px;
    background: #444;
    outline: none;
    opacity: 0.9;
    transition: background 0.3s ease, opacity 0.3s ease;
}

.slider-controls input[type='range']::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: #fff;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    cursor: pointer;
}

.slider-controls input[type='range']::-moz-range-thumb {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: #fff;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    cursor: pointer;
}

/* Output Styling */
.slider-controls output {
    color: #fff;
    font-family: 'Roboto', sans-serif;
    font-size: 16px;
    letter-spacing: 0.5px;
}

/* Additional Animations */
@keyframes pulse {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7);
    }
    70% {
        transform: scale(1.1);
        box-shadow: 0 0 15px 15px rgba(255, 0, 0, 0);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(255, 0, 0, 0);
    }
}

.info {
    animation: pulse 2s infinite;
}

</style>
`);
    localStorage['apap'] = localStorage['apap'] || false;
    localStorage['papa'] = localStorage['papa'] || JSON.stringify(SelectedTank);
    SelectedTank = JSON.parse(localStorage['papa']);
    try {
        for (const k in t = Object.entries(Skins?.[Object.entries(SelectedTank.hull)?.[0]?.[0]])) {
            if (t[k][0] !== 'or') {
                var el = document.createElement('option');
                el.textContent = t[k][0];
                el.value = t[k][0];
                Hull.appendChild(el);
            };
        };
        for (const k in t = Object.entries(Skins?.[Object.entries(SelectedTank.turret)?.[0]?.[0]])) {
            if (t[k][0] !== 'or') {
                var el = document.createElement('option');
                el.textContent = t[k][0];
                el.value = t[k][0];
                Turret.appendChild(el);
            };
        };
    } catch (error) {};
    Hull.value = SelectedTank.hull[Object.entries(SelectedTank.hull)[0][0]];
    Turret.value = SelectedTank.turret[Object.entries(SelectedTank.turret)[0][0]];
    if (localStorage['apap'] == 'true') {
        document.getElementById('skin-check').setAttribute('checked', '');
        var ta = 0;
        var o = fetch;
        var replacements = {};
        try {
            for (const k in t = Skins[Object.entries(SelectedTank.turret)[0][0]][SelectedTank.turret[Object.entries(SelectedTank.turret)[0][0]]]) {
                replacements[Skins[Object.entries(SelectedTank.turret)[0][0]].or[k]] = t[k];
            };
            for (const k in t = Skins[Object.entries(SelectedTank.hull)[0][0]][SelectedTank.hull[Object.entries(SelectedTank.hull)[0][0]]]) {
                replacements[Skins[Object.entries(SelectedTank.hull)[0][0]].or[k]] = t[k];
            };
        } catch (error) {};
        fetch = function() {
            for (let key in replacements) {
                if (arguments[0].includes(key)) {
                    ta++;
                    arguments[0] = arguments[0].replace(key, replacements[key]);
                    if (ta > 5) {
                        fetch = o;
                    };
                };
            };
            return o.apply(this, arguments);
        };
    };
    document.getElementById('skin-check').addEventListener('change', function () {
        localStorage['apap'] = this.checked;
    });

    Hull.addEventListener('change', () => {
        SelectedTank.hull[User.hull.name.toLowerCase()] = Hull.value;
        localStorage['papa'] = JSON.stringify(SelectedTank);
        for (const k in SelectedTank.turret) {
            if (k !== User.turret.name.toLowerCase()) {
                delete SelectedTank.turret[k];
            };
        };
        for (const k in SelectedTank.hull) {
            if (k !== User.hull.name.toLowerCase()) {
                delete SelectedTank.hull[k];
            };
        };
    });

    Turret.addEventListener('change', () => {
        SelectedTank.turret[User.turret.name.toLowerCase()] = Turret.value;
        localStorage['papa'] = JSON.stringify(SelectedTank);
        for (const k in SelectedTank.turret) {
            if (k !== User.turret.name.toLowerCase()) {
                delete SelectedTank.turret[k];
            };
        };
        for (const k in SelectedTank.hull) {
            if (k !== User.hull.name.toLowerCase()) {
                delete SelectedTank.hull[k];
            };
        };
    });

    document.addEventListener('keydown', (e) => {
        if (e.ctrlKey && e.key == 'm') {
            e.preventDefault();
            document.querySelector('.gui2').style.display = document.querySelector('.gui2').style.display == 'block' ? 'none' : 'block';
            document.querySelector('.gui3').style.display = document.querySelector('.gui3').style.display == 'block' ? 'none' : 'block';
        };
    });
    var f, r = true;
    function a() {
        if (r) {
            f = requestAnimationFrame(a);
            if (User?.turret?.name) {
                document.querySelector('label[for="Turret"]').textContent = User.turret.name;
                document.querySelector('label[for="Hull"]').textContent = User.hull.name;
                for (const k in SelectedTank.turret) {
                    if (k !== User.turret.name.toLowerCase()) {
                        delete SelectedTank.turret[k];
                    };
                };
                for (const k in SelectedTank.hull) {
                    if (k !== User.hull.name.toLowerCase()) {
                        delete SelectedTank.hull[k];
                    };
                };
                SelectedTank.hull[User.hull.name.toLowerCase()] = Hull.value;
                SelectedTank.turret[User.turret.name.toLowerCase()] = Turret.value;
                localStorage['papa'] = JSON.stringify(SelectedTank);
                Hull.innerHTML = '';
                Turret.innerHTML = '';
                try {
                    for (const k in t = Object.entries(Skins?.[User.hull.name.toLowerCase()])) {
                        if (t[k][0] !== 'or') {
                            var el = document.createElement('option');
                            el.textContent = t[k][0];
                            el.value = t[k][0];
                            Hull.appendChild(el);
                        };
                    };
                    for (const k in t = Object.entries(Skins?.[User.turret.name.toLowerCase()])) {
                        if (t[k][0] !== 'or') {
                            var el = document.createElement('option');
                            el.textContent = t[k][0];
                            el.value = t[k][0];
                            Turret.appendChild(el);
                        };
                    };
                } catch (error) {};
                localStorage['papa'] = JSON.stringify(SelectedTank);
                cancelAnimationFrame(f);
                r = false;
            };
        };
    };
    try {
        a();
    } catch (error) {
        console.log(error);
        r = false;
        cancelAnimationFrame(f);
    };
